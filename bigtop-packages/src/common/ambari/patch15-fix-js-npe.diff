From 240039f9218ff17c478a4e68093fff71e93cd99c Mon Sep 17 00:00:00 2001
From: Bartosz Mikulski <bartmiki97@gmail.com>
Date: Wed, 24 Apr 2024 17:36:54 +0200
Subject: [PATCH] Resolve NPE

---
 .../admin/highAvailability/nameNode/step7_controller.js   | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/ambari-web/app/controllers/main/admin/highAvailability/nameNode/step7_controller.js b/ambari-web/app/controllers/main/admin/highAvailability/nameNode/step7_controller.js
index 722668cf05..eeee7f3262 100644
--- a/ambari-web/app/controllers/main/admin/highAvailability/nameNode/step7_controller.js
+++ b/ambari-web/app/controllers/main/admin/highAvailability/nameNode/step7_controller.js
@@ -32,11 +32,15 @@ App.HighAvailabilityWizardStep7Controller = App.HighAvailabilityProgressPageCont
       tasksToRemove.push('startAmbariInfra');
     }
 
-    if (App.ClientComponent.getModelByComponentName('RANGER_ADMIN').get('installedCount') === 0) {
+    let isDefinedThen = function(module, predicate) {
+      return module === undefined || module === null || predicate(module);
+    }  
+
+    if (isDefinedThen(App.ClientComponent.getModelByComponentName('RANGER_ADMIN'), (module) => module.get('installedCount') === 0)) {
       tasksToRemove.push('startRanger');
     }
 
-    if (App.ClientComponent.getModelByComponentName('MYSQL_SERVER').get('installedCount') === 0) {
+    if (isDefinedThen(App.ClientComponent.getModelByComponentName('MYSQL_SERVER'), (module) => module.get('installedCount') === 0)) {
       tasksToRemove.push('startMysqlServer');
     }
 
-- 
2.34.1

